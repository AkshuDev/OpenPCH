#:kivy 2.3.0

<NeonLabel@Label>:
    font_size: "18sp"
    color: 0, 1, 0.9, 1   # cyan glow
    canvas.before:
        Color:
            rgba: 0, 1, 0.9, 0.2
        Rectangle:
            pos: self.pos
            size: self.size

<GlassPanel@BoxLayout>:
    orientation: "vertical"
    padding: dp(15)
    spacing: dp(10)
    size_hint: None, None
    size: dp(300), dp(200)
    canvas.before:
        Color:
            rgba: (1,1,1,0.08)  # glass opacity
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [12]
        Color:
            rgba: (0,1,1,0.25)  # cyan border glow
        Line:
            width: 1.3
            rounded_rectangle: (self.x, self.y, self.width, self.height, 12)

<MainScreen>:
    name: "main"
    BoxLayout:
        orientation: "vertical"
        spacing: dp(10)
        canvas.before:
            Color:
                rgba: 1,1,1,0.03
            Rectangle:
                size: self.size
                pos: self.pos

        # Top Bar
        BoxLayout:
            size_hint_y: None
            height: dp(50)
            padding: dp(15)
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 0.6
                Rectangle:
                    size: self.size
                    pos: self.pos
            Label:
                text: "OpenPCH â€” Open Peripheral Control Hub"
                bold: True
                color: 0.8, 0.9, 1, 1
                font_size: "20sp"

        # Main Content
        BoxLayout:
            padding: dp(20)
            spacing: dp(20)

            # Left Panel: Devices
            GlassPanel:
                BoxLayout:
                    orientation: "vertical"
                    spacing: dp(10)
                    Label:
                        text: "Devices"
                        bold: True
                        font_size: "16sp"
                        color: 1,1,1,1
                    RecycleView:
                        viewclass: "Label"
                        data: [{"text": d["name"], "color": (0.9,0.9,0.9,1)} for d in root.devices]
                        RecycleBoxLayout:
                            orientation: "vertical"
                            default_size: None, dp(40)
                            size_hint_y: None
                            height: self.minimum_height

            # Right Panel: Settings
            GlassPanel:
                BoxLayout:
                    orientation: "vertical"
                    spacing: dp(10)

                    Label:
                        text: root.status_text
                        color: 0.6, 0.9, 1, 1
                        font_size: "14sp"

                    BoxLayout:
                        spacing: dp(10)
                        Label:
                            text: "DPI"
                            color: 0.9, 0.9, 0.9, 1
                        Slider:
                            min: 200
                            max: 16000
                            step: 100
                            value: root.dpi
                            on_value: root.dpi = self.value

                    BoxLayout:
                        spacing: dp(10)
                        Label:
                            text: "RGB"
                            color: 0.9, 0.9, 0.9, 1
                        ColorPicker:
                            size_hint_y: None
                            height: dp(200)
                            on_color: root.rgb_color = self.color

                    BoxLayout:
                        size_hint_y: None
                        height: dp(40)
                        spacing: dp(10)
                        Button:
                            text: "Connect / Disconnect"
                            on_release: root.toggle_connect()
                        Button:
                            text: "Save Profile"
                            on_release: root.save_profile()
                        Button:
                            text: "Export Profile"
                            on_release: root.export_profile_json()
